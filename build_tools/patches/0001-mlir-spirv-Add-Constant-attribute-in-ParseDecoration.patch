From 2f9f2b667724ecae67228781a830f54624fcb241 Mon Sep 17 00:00:00 2001
From: "Prajapati, Dimple" <dimpalben.r.prajapati@intel.com>
Date: Fri, 12 Jan 2024 09:12:03 -0800
Subject: [PATCH] [mlir][spirv] Add Constant attribute in ParseDecoration

---
 mlir/lib/Target/SPIRV/Deserialization/Deserializer.cpp | 1 +
 mlir/lib/Target/SPIRV/Serialization/Serializer.cpp     | 1 +
 2 files changed, 2 insertions(+)

diff --git a/mlir/lib/Target/SPIRV/Deserialization/Deserializer.cpp b/mlir/lib/Target/SPIRV/Deserialization/Deserializer.cpp
index 89e2e7ad52fa..88a2c25a66d4 100644
--- a/mlir/lib/Target/SPIRV/Deserialization/Deserializer.cpp
+++ b/mlir/lib/Target/SPIRV/Deserialization/Deserializer.cpp
@@ -297,6 +297,7 @@ LogicalResult spirv::Deserializer::processDecoration(ArrayRef<uint32_t> words) {
     decorations[words[0]].set(symbol, llvm::dyn_cast<Attribute>(linkageAttr));
     break;
   }
+  case spirv::Decoration::Constant:
   case spirv::Decoration::Aliased:
   case spirv::Decoration::Block:
   case spirv::Decoration::BufferBlock:
diff --git a/mlir/lib/Target/SPIRV/Serialization/Serializer.cpp b/mlir/lib/Target/SPIRV/Serialization/Serializer.cpp
index 9e9a16456cc1..48b5b24e3249 100644
--- a/mlir/lib/Target/SPIRV/Serialization/Serializer.cpp
+++ b/mlir/lib/Target/SPIRV/Serialization/Serializer.cpp
@@ -266,6 +266,7 @@ LogicalResult Serializer::processDecoration(Location loc, uint32_t resultID,
              << attrName << " attribute " << strAttr.getValue();
     }
     return emitError(loc, "expected string attribute for ") << attrName;
+  case spirv::Decoration::Constant:
   case spirv::Decoration::Aliased:
   case spirv::Decoration::Flat:
   case spirv::Decoration::NonReadable:
--
2.34.1
